{"version":3,"file":"pages/checkout-frame/index.js","sources":["webpack:///./components/SelectedCustomer.vue?1e3b","webpack:///./components/SelectedCustomer.vue","webpack:///./components/SelectedCustomer.vue?0458","webpack:///./components/SelectedCustomer.vue?bf49","webpack:///./components/CustomerForm.vue?9418","webpack:///./components/CustomerForm.vue","webpack:///./components/CustomerForm.vue?d3c6","webpack:///./components/CustomerForm.vue?eb6e","webpack:///./components/PaymentSelector.vue?40c6","webpack:///./components/PaymentSelector.vue","webpack:///./components/PaymentSelector.vue?4b1b","webpack:///./components/PaymentSelector.vue?80c6","webpack:///./pages/checkout-frame/index.vue?62c5","webpack:///./pages/checkout-frame/index.vue","webpack:///./pages/checkout-frame/index.vue?9df7","webpack:///./pages/checkout-frame/index.vue?df16"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"selected-customer\"}},[_vm._ssrNode(\"<div class=\\\"flex items-center\\\"><div class=\\\"flex-grow\\\"><span class=\\\"rounded-full text-white uppercase px-2 py-1 text-xs font-bold mr-3\\\" style=\\\"background-color:#327dff\\\">\"+_vm._ssrEscape(\"\\n                \"+_vm._s(_vm.customer.customerType == 'person' ? 'Private customer' : 'Business customer')+\"\\n            \")+\"</span> <p class=\\\"text-sm mt-3\\\"><span>\"+_vm._ssrEscape(_vm._s(_vm.customer.firstName)+\" \"+_vm._s(_vm.customer.lastName))+\"</span><br> <span>\"+_vm._ssrEscape(_vm._s(_vm.customer.email))+\"</span></p></div> <div><button class=\\\"text-base rounded py-2 text-gray-600\\\">Change</button></div></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    props: {\n        customer: {\n            required: true\n        }\n    },\n    methods: {\n        changeCustomer(e) {\n            e.preventDefault()\n\n            this.$store.commit('selectPaymentMethod', null)\n            this.$store.commit('setCustomer', null)\n        }\n    }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectedCustomer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectedCustomer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SelectedCustomer.vue?vue&type=template&id=5d166b9c&\"\nimport script from \"./SelectedCustomer.vue?vue&type=script&lang=js&\"\nexport * from \"./SelectedCustomer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"703549e2\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{attrs:{\"id\":\"customer-form\"}},[_vm._ssrNode(\"<label for=\\\"customer-type\\\" class=\\\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\\\">\\n        Customer type\\n    </label> \"),_vm._ssrNode(\"<div class=\\\"inline-block relative w-full mb-6\\\">\",\"</div>\",[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.customer.customerType),expression:\"customer.customerType\"}],staticClass:\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\",attrs:{\"id\":\"customer-type\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.customer, \"customerType\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":'person'}},[_vm._v(\"Private person\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":'business'}},[_vm._v(\"Business\")])]),_vm._ssrNode(\" <div class=\\\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" class=\\\"fill-current h-4 w-4\\\"><path d=\\\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\\\"></path></svg></div> \"+((this.errors.customer)?(\"<p class=\\\"text-red-500 text-xs italic\\\">\"+_vm._ssrEscape(_vm._s(this.errors.customer))+\"</p>\"):\"<!---->\"))],2),_vm._ssrNode(\" <div class=\\\"flex flex-wrap -mx-3 mb-6\\\"><div class=\\\"w-full md:w-1/2 px-3 mb-6 md:mb-0\\\"><label for=\\\"customer-first-name\\\" class=\\\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\\\">\\n                First Name\\n            </label> <input id=\\\"customer-first-name\\\" type=\\\"text\\\"\"+(_vm._ssrAttr(\"value\",(_vm.customer.firstName)))+\" class=\\\"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\\\"> \"+((this.errors.firstName)?(\"<p class=\\\"text-red-500 text-xs italic\\\">\"+_vm._ssrEscape(_vm._s(this.errors.firstName))+\"</p>\"):\"<!---->\")+\"</div> <div class=\\\"w-full md:w-1/2 px-3\\\"><label for=\\\"customer-last-name\\\" class=\\\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\\\">\\n                Last Name\\n            </label> <input id=\\\"customer-last-name\\\" type=\\\"text\\\"\"+(_vm._ssrAttr(\"value\",(_vm.customer.lastName)))+\" class=\\\"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\\\"> \"+((this.errors.lastName)?(\"<p class=\\\"text-red-500 text-xs italic\\\">\"+_vm._ssrEscape(_vm._s(this.errors.lastName))+\"</p>\"):\"<!---->\")+\"</div></div> <div class=\\\"flex flex-wrap -mx-3 mb-6\\\"><div class=\\\"w-full px-3\\\"><label for=\\\"customer-email\\\" class=\\\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\\\">\\n                Email\\n            </label> <input id=\\\"customer-email\\\" type=\\\"email\\\"\"+(_vm._ssrAttr(\"value\",(_vm.customer.email)))+\" class=\\\"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\\\"> \"+((this.errors.email)?(\"<p class=\\\"text-red-500 text-xs italic\\\">\"+_vm._ssrEscape(_vm._s(this.errors.email))+\"</p>\"):\"<!---->\")+\"</div></div> <div class=\\\"w-full flex justify-center\\\">\"+(_vm._ssrList((this.paymentMethods),function(method){return (\"<button\"+(_vm._ssrAttr(\"disabled\",method.selected))+\" class=\\\"text-base rounded py-2 px-6 mx-2 text-white shadow-lg hover:shadow-none self-end\\\" style=\\\"background-color:#327dff\\\">\"+_vm._ssrEscape(\"\\n            \"+_vm._s(method.title)+\"\\n        \")+\"</button>\")}))+\"</div>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    data() {\n        return {\n            customer: {\n                customerType: 'person',\n                firstName: null,\n                lastName: null,\n                email: null\n            },\n            errors: {},\n            paymentMethods: this.$store.state.paymentMethods\n        }\n    },\n    methods: {\n        submitForm(selectedPaymentMethod) {\n            // Reset `error` object\n            this.errors = {}\n\n            if (!this.customer.customerType) {\n                this.errors['customer'] = 'Please select a customer type'\n            }\n\n            if (!this.customer.firstName) {\n                this.errors['firstName'] = 'Please enter your first name'\n            }\n\n            if (!this.customer.lastName) {\n                this.errors['lastName'] = 'Please enter your last name'\n            }\n\n            if (!this.customer.email) {\n                this.errors['email'] = 'Please enter a valid email'\n            }\n\n            if (Object.keys(this.errors).length != 0) {\n                return\n            }\n\n            this.$store.commit('selectPaymentMethod', selectedPaymentMethod)\n            this.$store.commit('setCustomer', this.customer)\n        }\n    }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomerForm.vue?vue&type=template&id=4d3964f8&\"\nimport script from \"./CustomerForm.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomerForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"2b9c53b8\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"payment-selector\"}},[_vm._ssrNode(\"<div class=\\\"w-full flex justify-center pt-6 mb-4\\\">\"+(_vm._ssrList((this.paymentMethods),function(method){return (\"<button\"+(_vm._ssrAttr(\"disabled\",method.selected))+(_vm._ssrClass(\"text-base rounded py-2 px-6 mx-2 hover:shadow-none self-end\",method.selected ? 'text-white shadow-lg' : 'text-black shadow'))+(_vm._ssrStyle(null,method.selected ? 'background-color:#327dff' : '', null))+\">\"+_vm._ssrEscape(\"\\n            \"+_vm._s(method.title)+\"\\n        \")+\"</button>\")}))+\"</div> <div><div class=\\\"px-10 pt-2 pb-4 text-grey-darkest text-sm\\\"><div style=\\\"height: 500px\\\"></div></div></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    data() {\n        return {\n            externalMountedObject: null,\n            paymentMethods: this.$store.state.paymentMethods\n        }\n    },\n    mounted() {\n        this.paymentMethods.forEach(element => {\n            if (element.selected) {\n                this.didSelectPaymentMethod(element)\n            }\n        })\n    },\n    methods: {\n        selectPaymentMethod(method) {\n            this.$store.commit('selectPaymentMethod', method)\n            this.didSelectPaymentMethod(method)\n        },\n        async didSelectPaymentMethod(method) {\n            if (this.externalMountedObject) {\n                this.externalMountedObject.destroy()\n            }\n\n            const session = await this.createSession()\n\n            const token = session.token\n            const checkout = new Bambora.InlineCheckout(token, {\n                eventHandlerMap: {\n                    [Event.Authorize]: [(e) => console.log(e)]\n                }\n            })\n\n            const mountTo = this.$refs['external-mount']\n            await checkout.mount(mountTo)\n            this.externalMountedObject = checkout\n        },\n        async createSession() {\n            const accessToken = 'VGNBR1BvNjA0b1BJZXdncmQ3MzZAVDY2ODEwODkwMTo5QTM2VjQ1S3I1ZzFFRnNpU1ZsSEVxTlFudzJnVnozT0R4SnM4ZUt1'\n            const url = 'https://api.v1.checkout.bambora.com/sessions'\n\n            const data = {\n                order: {\n                    id: '2',\n                    amount: '48702',\n                    currency: 'NOK'\n                },\n                url: {\n                    accept: 'http://localhost:3001/accept',\n                    cancel: 'http://localhost:3001/accept'\n                }\n            }\n            \n            const response = await fetch(url, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json',\n                    'Authorization': `Basic ${accessToken}`\n                },\n                body: JSON.stringify(data)\n            })\n\n            return await response.json()\n        }\n    }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaymentSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaymentSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PaymentSelector.vue?vue&type=template&id=2ff61562&\"\nimport script from \"./PaymentSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./PaymentSelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"3df896ff\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"max-w-lg mx-auto my-8\"},[_vm._ssrNode(\"<section id=\\\"customer\\\"\"+(_vm._ssrClass(\"rounded-lg p-4 mb-4\",_vm.hasCustomer ? '' : 'shadow'))+\">\",\"</section>\",[(_vm.hasCustomer)?_c('SelectedCustomer',{attrs:{\"customer\":this.customer}}):_c('CustomerForm')],1),_vm._ssrNode(\" \"),(_vm.hasCustomer)?_vm._ssrNode(\"<section id=\\\"payment\\\" class=\\\"shadow\\\">\",\"</section>\",[_c('PaymentSelector')],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: 'checkout-frame',\n    computed: {\n        customer() {\n            return this.$store.state.customer\n        },\n        hasCustomer() {\n            return this.$store.state.customer != null\n        }\n    }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1e61da22&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"74459db2\"\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {SelectedCustomer: require('/Users/theodorskippervold/.go/src/github.com/tskippervold/golang-base-server/static/components/SelectedCustomer.vue').default,CustomerForm: require('/Users/theodorskippervold/.go/src/github.com/tskippervold/golang-base-server/static/components/CustomerForm.vue').default,PaymentSelector: require('/Users/theodorskippervold/.go/src/github.com/tskippervold/golang-base-server/static/components/PaymentSelector.vue').default})\n"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AADA;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AAPA;AANA;;ACpBA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AARA;AAUA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;AAbA;;AC7DA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AADA;AAMA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAFA;AANA;AAYA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAPA;AAUA;AACA;AACA;AAnDA;AAdA;;ACvBA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAPA;AAFA;;ACdA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}